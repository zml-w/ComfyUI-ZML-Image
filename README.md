<div align="center">
  
### [🇨🇳 简体中文](README.md) | [🇺🇸 English](README_EN.md)

</div>

# 🥰 简单介绍一下节点：
**这是一个功能丰富的COMFYUI自定义节点，主要和“图像、文本、整数、LoRA加载器”相关，还有一些杂七杂八的小工具。目前节点总数共有50+，一般情况下每隔两天都会有新的节点增加。**

`我是按照自己的需求来开发的`

## 版本更新介绍
> ### 最新更新日期： **2025.08.27**

> - #### 优化了遮罩分割节点。
>
> - #### 对画画节点进行了大更新，现在支持绘制输入的图像、绘制马赛克、绘制简易形状，形状包括“方形、三角形、圆形、心形、五角形、箭头”。
>
> - #### 新增了图像形变的节点，模拟PS里的液化和形变功能，但目前不支持处理透明通道，有空修。
>
> - #### 选择文本V3节点和强力lora加载器节点的自定义文本输入框改为了只读，可以点击后弹出窗口进行修改，不用在那狭小的区域写文本了。
>
> - #### 修复了强力lora加载器节点不连接clip会报错的问题，现在是真的变成可选了。
>
> - #### 给强力lora加载器节点增加了一个批量添加Lora的弹窗页面，并且可以一键获取lora信息。给按钮增加了css视觉反馈，这样就不会显得那么土了，
>
> - #### 新增分类图像节点，可以快速分类出“无元数据、有元数据、有文本块”的图像，示例工作流也已经上传。
>
> - #### 新增名称加载lora节点。强力lora节点新增一个lora名称列表的输出接口，可以输出加载的lora名称和权重给“名称加载lora”节点，以达到修改一个节点的参数同时影响多个节点的效果。当你在模型接力时不想在两个lora节点里都手动添加lora时，就可以给采样器2接入“名称加载lora”节点，这个时候只需要修改采样器1连接的强力lora加载器节点即可。
>

<details>
<summary>点击查看往期更多更新内容</summary>

> ### 更新日期： **2025.08.22**

> - #### 将强力lora加载器的输入接口全部改为可选。
>
> - ### 彻底修复了强力lora加载器节点和文本选择V3节点的UI显示bug！！
> 

> ### 更新日期： **2025.08.19**

> - #### 修复了标签化提示词节点的一些bug，还优化了一些功能。
>
> - ### 以前的文本图像和文本水印节点只有在全屏模式下留空颜色代码才会显示透明，现在所有位置都可以了！
> 
> - #### 给强力lora加载器节点加了个文件夹的按钮，现在可以把lora放在文件夹里了，更方便分类！！创建一个文件夹，然后拖拽lora到文件夹里即可！为了防止误删，我还限制了必须是没有lora的空文件夹才可以删除！文件夹的样式可以自定义，推荐先给节点设置一个喜欢的颜色，然后再用吸管工具给文件夹上色。
>
> - #### 强力lora节点都有文件夹功能了，那必须要给选择文本V3节点也整一个！
>

> ### 更新日期： **2025.08.16**

> ### 超级大更新！！
> 
> - #### 文本行节点可以同时随机多行了。
>
> - #### 解析lora的节点也支持树状文件夹了。
>
> - #### 新增选择文本V3节点，可以实时增加新的文本框，每个文本框都有对应的布尔开关和删除按钮，还都可以设置自己的名字，名字不会输出，节点只会将启用的文本框里的文本内容合并后进行输出。
>
> - #### 新增强力lora加载器节点，是的，这个节点的灵感借鉴了RG。
>
>   * 节点继承了之前的lora加载器的 **“树状文件夹、鼠标悬停预览图像、输出预设的txt提示词”** ，并且节点可以实时增加新的lora，就像RG的强力lora加载器那样，而且节点还可以给lora**设置名字和自定义文本**，名字和自定义文本是储存在工作流里的，跟lora文件和txt文件无关！
>   * 如果不想设置名字和自定义文本，可以把尺寸改到最小，节点支持实时更改名字和文本框的大小！lora有快捷开关和删除按钮，还有拖动按钮，也可以锁定拖动按钮防止误触，很厉害吧！！
>  
>   * 目前**已知问题**为刷新页面后节点会显示为初始样式，看起来好像之前保存的东西都没了，但其实只是一个小小的显示bug，没有实际影响，点击一下“🔒”或者其它的什么东西来更新节点就恢复正常了。
>

> ### 更新日期： **2025.08.14**

> #### 分类了一下节点，新增了一个“其它”分类。
> 
> - #### 新增旋转图像节点。
>
> - #### 新增桥接预览图像节点。
>
> - #### 合并图像节点加了个调节前景图不透明度的功能。
>
> - #### 桌宠加了个记录上次位置的功能。
>
> - #### 随机文本权重节点新加了文本框。
>
> - #### 文本水印节点和文本图像节点新增了描边的功能。之前颜色代码留空=随机颜色，现在要随机颜色需要输入“ZML”，留空变成了透明颜色。透明的水印不妨碍观看原图像，并且可以让水印更难以去除。
>   

> ### 更新日期： **2025.08.11**

> - #### 更新了画画节点。

> ### 更新日期： **2025.08.08**

> - #### 新增了标签化提示词加载节点，和旧版weilin相似，用js重新写的ui，功能仿旧版weilin，支持批量导入tag，仅支持txt文件导入，导入格式为 “中文,英文”，如“一个女孩,1girl”。目前还是半成品。

> ### 更新日期： **2025.08.07**

> - 增加了悬浮球！！还有互动哦~常态模式为png图片，运行工作流时为GIF动画，双击悬浮球会短暂更改图片和播放音频！鼠标悬停在悬浮球上还会有呼吸效果！！右键悬浮球可以关闭双击音频和隐藏悬浮球，设置里有 **“更详细”** 的参数！这是一个纯娱乐的功能，如果你不喜欢，可以在设置里关掉。如果想更改图片和GIF动画，可以在ComfyUI-ZML-Image\zml_w\web\images文件夹里替换文件，但要确保文件名以及文件格式正确。
> 
> - 新增一个简易的图像保存节点，节点选项只有“操作模式、保存路径、文本块储存”三个，非常的整洁！
> 
> - 修复了一些小bug，做了一些小优化。
> 

> 更新日期：2025.08.06 又一次超级大更新！！

> 增加了标签化图像加载节点，UI借鉴了weilin，可以通过点击按钮来批量加载图像并读取文本块，鼠标悬停在按钮上还可以预览图像！
> 
> 还增加了一个单文本块加载节点，比加载图像节点更方便使用！！
> 
> 新增一个音频播放器的节点，内置了几个音频  Ciallo～(∠・ω< )⌒☆
>  
> 删除了lora分层控制节点。
>
> 优化了一些节点。

> 更新日期：2025.08.03
> 
> 现在应该可以通过Manager安装了，我已经修好bug了！
> 
> 新增双浮点节点。
> 
> 新增预设分辨率节点，和预设文本节点功能类似。
> 
> 新增双整数V3（判断节点），在节点里预设三个分辨率尺寸，然后对输入接口输入的值进行判断，如果输入的宽>高则输出预设的第一个分辨率，输入的宽<高则输出预设的第三个分辨率，如果宽=高或者宽高差值没有超过阈值，则输出第二个分辨率。我做这个是给wan图生视频用的，V2版本虽然可以一键切换分辨率但还是要手动，有时候会忘了调整，而V3版本可以自动判断视频分辨率，方便多了。
> 
> 为了快速的准备好lora的介绍（log）、触发词（txt）、图片，做了一个解析lora元数据的节点，加载lora即可自动下载好 lora加载器所需的txt、log和图片文件夹，且自动放在加载lora目录的子文件夹zml里，非常方便。
> 
> 可视化裁剪节点支持原分辨率输出了。
> 

> **下面是之前写的节点介绍**
>

> 0、和官方的保存图像节点相比，多了个输入文本块的功能，将任意文本提示词输入到节点里，将输入的文本写入图像的元数据（不是工作流信息），文本块需要特定的方式才能提取出来，支持自定义图像名称的前缀后缀，图像名称计数和根据当前时间命名，还可以缩放图像并删除图像元数据（工作流信息），只保留文本块的信息让硬盘压力大幅度降低。
> 
> 1、和官方的加载图像节点相比，节点只会加载单帧图片，即使加载的是GIF也只会输出一张图片，支持输出含透明通道的图像，可以读取图像的文件名，可以读取图像保存的文本块信息，对，就是保存节点保存的文本块。
> 
> 2、从路径加载图像节点支持从文件夹中读取图像和对应文本块，支持固定索引、顺序索引、随机索引这三种模式（抽卡抽到爽！）。
> 
> 3、图片/GIF转为HTML文件节点，在外面完全看不出来这个文件里是什么，必须下载后在本地打开才会显示图像/GIF里的内容，至于这个功能主要在什么时候使用...你知道的\\\_‘
> 
> 4、将NAI权重格式转化为SD权重格式，还可以帮助过滤不想要的tag，还可以格式化标点符号，还可以自定义删除任意的字符。
> 
> 5、随机文本行（也可以按照顺序加载和按照索引加载）和随机画师（可自定义随机画师数量和画师权重的最大最小值），内置1000画师的txt文件，也可以自己添加。
>
> 6、有多个文本输入节点和文本选择节点，文本选择节点就是将提示词提前写好到节点里，再选择启用哪个，适合用来放一些常用的提示词（我一般放wan的常用提示词）。
> 
> 7、有限制分辨率格式的节点，可以用于格式化生图的分辨率（默认是生图的分辨率‘8’），也可以用于限制wan的分辨率格式和wan的帧数格式，具体用法看自己。
> 
> 8、可以使用yolo模型来自动打码，也可以自己输入遮罩来来打码。
> 
> 9、可以给图像添加文字水印，文字识别到图像边界时会自动换行，也可生成全屏水印，内置可商用字体。
> 
> 10、可以随机整数或预设整数并通过索引调用，随机生图分辨率和快速切换分辨率变得简单。
> 
> 11、基于ComfyUI-Custom-Scripts里的lora节点（LoRA加载器(pysss)）创建新三个新的节点，原节点GitHub链接：https://github.com/pythongosssss/ComfyUI-Custom-Scripts
。感谢作者的付出。在lora目录创建一个子文件夹‘zml’，里面放上和lora文件同名的图片、txt、log文件即可使用节点读取对应信息，选择lora时鼠标悬停可以预览图片，且会根据文件夹来分类lora文件。文件夹结构应该是这样的：lora/zml。lora里放着lora文件，比如111.safetensors，zml文件夹里放着111.png、111.txt、111.log。这真是一个伟大的创意，再次感谢原作者的付出。
> 
> 12、可视化裁剪图像节点，将加载图像的节点连接到此节点上，然后点击“裁剪图像”的按钮来打开ui进行手动调整裁剪区域，支持矩形、圆形、路径选择、画笔（套索）选择四种裁剪方式，不需要再打开ps啦！
> 
> 13、限制纯色背景大小节点，可以自动去除背景里多余的像素，目前支持白色、绿色、透明三种，节点会尽可能的将无用的多余像素裁剪掉，以方便进行拼接图像，支持将背景抠成矩形和不规则两种形状。
> 
> 14、添加纯色背景的节点，可以将图像对图像外部进行描边，如果图像是含透明通道的，则可以检测主体的轮廓，根据主体轮廓进行描边，描边的颜色支持“白色、黑色、绿色、透明”。
> 
> 15、合并图像节点，就是将2-4张图像ps到一起，目前虽然已经有其它节点做出了此功能，但我觉得不是太好操作，所以制作了此节点。和裁剪图像节点一样，也是点击按钮打开ui来处理图像，不需要事先运行工作流，只需要使用加载图像的节点连接到此节点上，然后点击按钮打开ui来编辑图像，编辑好后你的操作会保存到节点内部，直接运行节点即可输出之前处理好的图像。用来打码图像也是可以的，
> 
> 16、画画节点，就是一个画笔随意在图像上涂抹。
> 
> 17、图像暂停节点，节点会卡住15s，让你选择这次的图像输出哪个管道，只做了三个输出接口，未选中的接口只会输出占位图像，而不会输出输入的图像。可以接在采样器后面，图像满意就保存，不满意就仅预览，一般的图像保存节点会将占位图像也保存了，即使它只有1\\\*1像素，但用ZML\\\_保存图像节点就不会，专门做了优化。

</details>

### `节点名称全部以“ZML_”开头，并且全部放在“图像/ZML_图像”分类下。`

## 视频介绍：[点击访问](https://www.bilibili.com/video/BV1i4twzDELr/?spm_id_from=333.1007.0.0&vd_source=0134812498ce59b7f53810ad84889d12)

### 附属脚本仓库：

`这里放的是我做的一些小工具，有的是辅助节点使用，有的是提取的节点功能`

`脚本都是独立运行的，而不是在comfyui中使用`

- **https://github.com/zml-w/ZML-Image-Script/tree/main**

#### 大部分节点都有“help”输出接口，里面写着节点的详细介绍，没写的基本上都是随便试试就知道怎么用的。

<details>
<summary>点击展开部分节点截图</summary>
  
> <img width="1632" height="875" alt="1" src="https://github.com/user-attachments/assets/77ccda88-1851-4948-a45b-2f42b46d7f53" />
>
> <img width="1601" height="784" alt="2" src="https://github.com/user-attachments/assets/21f9d0aa-834e-48dd-9384-584e0a215284" />
>
> <img width="1210" height="913" alt="3" src="https://github.com/user-attachments/assets/3359a2fd-a55a-4068-aa25-0338298b7c0b" />
>
> <img width="1698" height="862" alt="4" src="https://github.com/user-attachments/assets/059746d8-31e0-4c97-a620-6e490a6a79b4" />
> 
> <img width="1607" height="755" alt="5" src="https://github.com/user-attachments/assets/8fe91394-8874-4eb4-85dc-d7f8ce6a86da" />
>
> <img width="1719" height="745" alt="6" src="https://github.com/user-attachments/assets/2eee7e21-52a0-4d6a-bd9f-8edd52e84eff" />
>
> <img width="1261" height="762" alt="7" src="https://github.com/user-attachments/assets/a1e67136-0ed7-4664-8f3a-3de69282f71b" />
>
> <img width="982" height="893" alt="8" src="https://github.com/user-attachments/assets/dd905d68-138d-4c30-a0e2-dbdb206c11e9" />
>
> <img width="1254" height="753" alt="9" src="https://github.com/user-attachments/assets/14e6f8df-8b36-4d06-a827-8bbdef1b0e8f" />
>
> <img width="1389" height="683" alt="10" src="https://github.com/user-attachments/assets/0757a6e3-d557-4284-ad56-dcc0e004b41c" />
>
> <img width="1294" height="816" alt="11" src="https://github.com/user-attachments/assets/de9b70a5-03b0-426a-90fc-bf1d8295abf2" />
>
> <img width="1131" height="712" alt="12" src="https://github.com/user-attachments/assets/c0d253aa-96c2-4a9e-b64f-682f3908fa2e" />
>
> <img width="1196" height="639" alt="13" src="https://github.com/user-attachments/assets/c1793444-d44f-47cd-89a4-67c408cde01e" />
>
> <img width="911" height="894" alt="14" src="https://github.com/user-attachments/assets/4f666b73-f968-4182-a327-e29187ddf202" />
>
> <img width="1290" height="760" alt="15" src="https://github.com/user-attachments/assets/5a520228-fe42-49c9-a43d-e545474254f4" />

</details>

## 有一部分节点和功能是借鉴的别人的

### 借鉴的代码：

- **lora加载节点：https://github.com/pythongosssss/ComfyUI-Custom-Scripts**

### 借鉴的灵感：

- **桌宠：https://github.com/11dogzi/Comfyui-ergouzi-kaiguan**

- **标签化提示词：https://github.com/weilin9999/WeiLin-ComfyUI-prompt-all-in-one**

- **桥接预览图像：https://github.com/ltdrdata/ComfyUI-Impact-Pack**

- **强力lora加载器：https://github.com/rgthree/rgthree-comfy**

## 有问题可以提交，有想法也可以提交

`妹妹好可爱，放个妹妹`

<img width="1024" height="540" alt="妹相随_6" src="https://github.com/user-attachments/assets/bc18deae-6c3c-4e70-a642-1b4210accdc3" />

